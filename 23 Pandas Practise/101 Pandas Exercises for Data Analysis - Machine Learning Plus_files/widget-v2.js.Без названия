window.announcekit=(()=>{var t={4514:(t,e,i)=>{"use strict";function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,{default:()=>gt});var o=i(6774);class n{constructor(){s(this,"listeners",void 0),this.listeners={}}trigger(t,e){var i,s;null===(i=this.listeners[t])||void 0===i||i.forEach((t=>t(e))),null===(s=this.listeners["*"])||void 0===s||s.forEach((i=>i({data:e,name:t})))}on(t,e){this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e)}off(t,e){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter((t=>t!=e)))}one(t,e){var i=this;let s;s=function(){i.listeners[t]=i.listeners[t].filter((t=>t!=s)),e(...arguments)},this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(s)}offAll(){this.listeners={}}}class r extends n{get state(){return{}}constructor(t){var e;super(),s(this,"destroyed",!1),s(this,"parent",void 0),this.parent=t,null===(e=this.parent)||void 0===e||e.on("state",(t=>this.trigger("state",t)))}watchState(t,e){let i=e(this.state);const s=s=>{let n=e(s);o(i,n)||(i=n,t(n))};return this.on("state",s),t(i),()=>this.off("state",s)}destroy(){this.destroyed||(this.destroyed=!0,this.trigger("destroy"),this.offAll())}}class a extends r{constructor(t){super(t)}get state(){return this.parent.state}get frame(){return this.parent.frame}get conf(){return this.parent.conf}get post(){var t;return null===(t=this.parent.state.boosterPosts)||void 0===t?void 0:t[this.type]}}function l(t){const e=t.replace(/#/,"");return[.299*parseInt(e.substr(0,2),16),.587*parseInt(e.substr(2,2),16),.114*parseInt(e.substr(4,2),16)].reduce(((t,e)=>t+e))/255}function d(t){let{color:e="#E01E5A",counter:i=0,reset:s=!1}=t,o=document.querySelector("link[rel~='icon']");o||(o=document.createElement("link"),o.setAttribute("rel","icon"),o.setAttribute("href",`${location.protocol}//${location.host}/favicon.ico`),document.head.appendChild(o));const n=o.getAttribute("data-href")||o.getAttribute("href");if(!n)return;const r=o.classList.contains("badge-init");if(s)return r?o.setAttribute("href",n):void 0;if(r)return;o.classList.add("badge-init"),o.setAttribute("data-href",n);const a=new Image;a.crossOrigin="anonymous";try{a.addEventListener("load",(function(){const t=document.createElement("canvas"),s=t.getContext("2d");t.width=a.width,t.height=a.height,s.beginPath(),s.drawImage(a,0,0,a.width,a.height,0,0,t.width,t.height),s.stroke(),s.beginPath(),s.fillStyle=e,s.strokeStyle=e,s.arc(.7*t.width,.7*t.height,t.height/3.5,0,2*Math.PI),s.fill(),s.stroke(),s.closePath(),s.fillStyle="#fff",s.font=`bold ${a.height/2}px sans-serif`,s.textAlign="center",s.textBaseline="middle",s.fillText(String(i),.7*t.width,.74*t.height),o.classList.add("badge-inserted"),o.setAttribute("href",t.toDataURL())})),a.src=n}catch(t){}}function h(t){return t instanceof Element?t:document.querySelector(t)}const c={};function p(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(c[`badge-shake-scale${t}`])return c[`badge-shake-scale${t}`];let e=`announcekit-badgeanim-${(new Date).getTime()}-${1e4*Math.random()|0}`;return c[`badge-shake-scale${t}`]=e,m(`\n    .${e} {\n      position: relative;\n      animation-name: kf-${e};\n      animation-duration: 2s;\n      animation-timing-function: cubic-bezier(0.15, 0.03, 0.06, 0.39);\n      animation-iteration-count: infinite;\n      animation-fill-mode: forwards;\n      opacity: 1;\n    }\n\n    @keyframes kf-${e} {\n      4%,\n      36% {\n        transform: translateX(-1px) ${t?`scale(${t})`:""}\n      }\n      8%,\n      32% {\n        transform: translateX(1px) ${t?`scale(${t})`:""};\n      }\n      12%,\n      20%,\n      28% {\n        transform: translateX(-2px) ${t?`scale(${t})`:""};\n      }\n      18%,\n      26% {\n        transform: translateX(2px) ${t?`scale(${t})`:""};\n      }\n      36%,\n      100% {\n        transform: translateX(-1px) ${t?`scale(${t})`:""};\n      }\n    }\n  `),e}function u(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ff4b4b";if(c[`badge-pulse-${t}`])return c[`badge-pulse-${t}`];let e=`announcekit-badgeanim-${(new Date).getTime()}-${1e4*Math.random()|0}`;return c[`badge-pulse-${t}`]=e,m(`\n    .${e} {\n      position: relative;\n      z-index: 1;\n    }\n\n    .${e}:after,\n    .${e}:before {\n      content: "";\n      position: absolute;\n      background: ${t};\n      border-radius: 50%;\n      width: 1.75em;\n      height: 1.75em;\n      animation-name: kf-${e};\n      animation-duration: 2s;\n      animation-timing-function: ease-out;\n      animation-iteration-count: infinite;\n      animation-fill-mode: forwards;\n      left: 50%;\n      top: 50%;\n      margin-top: -0.875em;\n      margin-left: -0.875em;\n      opacity: 0;\n      z-index: -1;\n    }\n\n    .${e}:after {\n      animation-delay: 1s;\n    }\n\n    @keyframes kf-${e} {\n      from {\n        transform: scale(0.7);\n        opacity: 0.6;\n      }\n      to {\n        transform: scale(1.5);\n        opacity: 0;\n      }\n    }\n  `),e}function g(){if(c["badge-minimalist"])return c["badge-minimalist"];let t=`announcekit-minimalist-${(new Date).getTime()}-${1e4*Math.random()|0}`;return c["badge-minimalist"]=t,m(`\n    .${t} {\n      transform: scale(0.5);\n      margin-left: -0.3em;\n      margin-top: -0.8em;\n    }\n\n    .announcekit-widget-floating-badge .announcekit-widget-badge.${t} {\n      margin-left: auto;\n      margin-top: auto;\n    }\n  `),t}function m(t){const e=document.createElement("style");return e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e),e}const f="announcekit-booster-bar",b=`\n  <span class="${f}-label"></span>\n  <span class="${f}-title"></span>\n  <span class="${f}-cta"></span>\n  <span class="${f}-close">&times;</span>\n`;class v extends a{get type(){return"bar"}constructor(t){super(t),s(this,"bar",void 0),s(this,"label",void 0),s(this,"title",void 0),s(this,"cta",void 0),s(this,"cssid",void 0),s(this,"showdelaytimer",void 0),s(this,"hidedelaytimer",void 0),s(this,"_configure",(()=>{this.watchState((t=>{let{disabled:e,sticky:i,bottom:s,color:o,fontSize:n,backgroundColor:r,title:a,url:d,labelName:h,cta:c,showLabel:p,labelColor:u,showunread:g,unread:m,lastRead:f,visibleAt:b,showdelay:v}=t;if(e||!a)return this._hide();if(g&&(!m||new Date(b).getTime()<=Number(f)))return this._hide();document.documentElement.style.setProperty("--announcekit-bar-font-multiplier",n);let w={backgroundColor:`#${r}`,color:`#${o}`};w.position=i?"fixed":"absolute",s?w.bottom="0":w.top="0",h&&p?(this.label.innerText=this.state.locale.$label[h]||h,Object.assign(this.label.style,{backgroundColor:`#${u}`,borderRadius:"3px",padding:"3px 5px",color:l(u)>.5?"black":"white",textTransform:"uppercase",marginRight:"5px",marginLeft:"5px",fontSize:"0.7em",lineHeight:1,display:""})):this.label.style.display="none",this.title.innerText=a,this.bar.href=d;let y=screen.width<700;c&&!y?(this.cta.innerText=c,this.cta.style.display="block"):(this.cta.style.display="none",this.cta.innerText=""),Object.assign(this.bar.style,w),this.conf.landingMode||this.showdelaytimer||(this.state.preview?this._show():this.showdelaytimer=setTimeout(this._show,1e3*v))}),(t=>{var e,i,s,o,n,r,a,l,d,h,c,p,u,g,m;return{disabled:!!t.widget.options["booster-common-disabled"]||!!t.widget.options["booster-bar-disabled"],sticky:!t.widget.options["booster-bar-absolute"],bottom:!!t.widget.options["booster-bar-bottom"],showLabel:!t.widget.options["booster-bar-hide-label"],cta:t.widget.options["booster-bar-cta"],showunread:"unread"==t.widget.options["booster-bar-visibility"],backgroundColor:String(t.widget.options["booster-bar-background-color"]||"5b64af"),color:String(t.widget.options["booster-bar-color"]||"ebf5ff"),fontSize:String(t.widget.options["booster-bar-font-size"]||"1"),showdelay:Number(t.widget.options["booster-bar-show-delay"]),hidedelay:Number(t.widget.options["booster-bar-hide-delay"]),title:null===(e=t.boosterPosts)||void 0===e||null===(i=e.bar)||void 0===i?void 0:i.title,url:null===(s=t.boosterPosts)||void 0===s||null===(o=s.bar)||void 0===o?void 0:o.url,labelName:null===(n=t.boosterPosts)||void 0===n||null===(r=n.bar)||void 0===r||null===(a=r.labels)||void 0===a||null===(l=a[0])||void 0===l?void 0:l.name,labelColor:null===(d=t.boosterPosts)||void 0===d||null===(h=d.bar)||void 0===h||null===(c=h.labels)||void 0===c||null===(p=c[0])||void 0===p?void 0:p.color,visibleAt:(null===(u=t.boosterPosts)||void 0===u||null===(g=u.bar)||void 0===g?void 0:g.visible_at)||0,unread:t.ui.unreadCount,lastRead:(null===(m=t.userData)||void 0===m?void 0:m.lastRead)||0}}))})),s(this,"hidetimer",null),s(this,"_show",(()=>{var t,e,i,s;this.hidetimer&&(clearTimeout(this.hidetimer),this.hidetimer=null),document.body.classList.add(`${this.cssid}-body`),this.bar.classList.add(`${this.cssid}-inactive`),setTimeout((()=>{this.bar.classList.remove(`${this.cssid}-inactive`),this.bar.classList.add(`${this.cssid}-active`)}),50);const o=Number(this.state.widget.options["booster-bar-hide-delay"]);o>0&&!this.state.preview&&setTimeout(this._hide,1e3*o),this.parent.sendBeacon({event_type:"widget-booster-show",custom_1:"bar",post_id:Number(null===(t=this.post)||void 0===t?void 0:t.id)||void 0}),this.parent.trigger("booster-show",{boster:"bar",post_id:null===(e=this.post)||void 0===e?void 0:e.id,post_title:null===(i=this.post)||void 0===i?void 0:i.title,post_url:null===(s=this.post)||void 0===s?void 0:s.url})})),s(this,"show",this._show),s(this,"_hide",(()=>{this.hidetimer||(this.bar.classList.remove(`${this.cssid}-active`),this.bar.classList.add(`${this.cssid}-inactive`),this.hidetimer=setTimeout((()=>{document.body.classList.remove(`${this.cssid}-body`),this.bar.classList.remove(`${this.cssid}-inactive`),this.hidetimer=null}),500))})),s(this,"hide",this._hide),s(this,"_createCSS",(()=>{let t=Math.random().toString(36).substr(2,9).toLowerCase();this.state.preview&&(t="preview");let e=m(`\n      .${f}-${t}-body {\n        position: static;\n      }\n      \n      .${f}-${t}-body:before {\n        margin-top: calc(var(--announcekit-bar-font-multiplier, 1) * 2.5rem);\n        content: ' ';\n        display: block;\n      }\n\n      .${f}-${t} {\n        position: absolute;\n        box-shadow: rgba(0, 0, 0, 0.18) 0px 1px 7px 0px;\n        z-index: 2147483000;\n        display: none;\n        height: calc(var(--announcekit-bar-font-multiplier, 1) * 2.5rem);\n        cursor: pointer;\n        left: 0px;\n        right: 0px;\n        width: 100%;\n        font-size: calc(var(--announcekit-bar-font-multiplier, 1) * 1rem);\n        justify-content: center;\n        align-items: center;\n        text-decoration: none;\n        top: 0;\n        transition-property: opacity transform;\n        transition-duration: .5s;\n        transition-timing-function: cubic-bezier(0, 1, 0.5, 1);\n      }\n\n      .${f}-${t}-inactive {\n        display: flex;\n        transform: translateY(-100%);\n        opacity: 0;\n      }\n\n      span.${f}-cta {\n        background-color: rgba(255,255,2555, 0.15);\n        border-radius: 3px;\n        padding: 3px 5px;\n        margin-left: 5px;\n        font-size: 0.7em;\n        display: none;\n        transition: 0.1s linear all;\n        line-height: 1;\n        font-weight: 600;\n      }\n\n      .${f}-${t} .${f}-title {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding: 0 0.5rem;\n      }\n\n      .${f}-${t}:hover span.${f}-cta {\n        background-color: rgba(255,255,2555, 0.2);\n      }\n\n      .${f}-${t} .${f}-close {\n        cursor: pointer;\n        right: 1rem;\n        position:absolute;\n        opacity: 0;\n        transition: .2s linear opacity;\n      }\n\n      .${f}-${t}:hover .${f}-close {\n        opacity: 1;\n      }\n\n      .${f}-${t}-active {\n        display: flex;\n        transform: translateY(0);\n        opacity: 1;\n      }\n\n      @media screen and (max-width: 700px) {\n        .${f}-${t} .${f}-close {\n            right: 0.75rem;\n            opacity: 1;\n        }\n\n        .${f}-${t} .${f}-title {\n            padding-right: 1.5rem;\n        }\n      }\n    `);return this.on("destroy",(()=>{var t;null===(t=e.parentElement)||void 0===t||t.removeChild(e)})),`${f}-${t}`})),this.cssid=this._createCSS(),this.bar=document.createElement("a"),this.bar.className=`${this.cssid} ${f}`,this.bar.target="_blank",this.bar.href=t.state.feed.url,this.bar.innerHTML=b,this.label=this.bar.querySelector(`.${f}-label`),this.title=this.bar.querySelector(`.${f}-title`),this.cta=this.bar.querySelector(`.${f}-cta`),document.body.appendChild(this.bar),this.bar.addEventListener("click",(t=>{var e,i,s,o,n;if(t.target.classList.contains(`${f}-close`))return t.preventDefault(),t.stopImmediatePropagation(),void(this.state.preview||(this._hide(),this.conf.landingMode||null===(n=this.parent)||void 0===n||n.setRead()));let r=this.state.widget.options["booster-bar-action"];var a,l,d;"widget"==r||"widget-single-post"==r?(t.preventDefault(),null===(a=this.parent)||void 0===a||a.open(),null===(l=this.parent)||void 0===l||l.showPost(this.post.id,{singular:"widget-single-post"==r})):null===(d=this.parent)||void 0===d||d.setRead(),this.parent.sendBeacon({event_type:"widget-booster-click",custom_1:"bar",post_id:Number(null===(e=this.post)||void 0===e?void 0:e.id)||void 0}),this.parent.trigger("booster-click",{boster:"bar",post_id:null===(i=this.post)||void 0===i?void 0:i.id,post_title:null===(s=this.post)||void 0===s?void 0:s.title,post_url:null===(o=this.post)||void 0===o?void 0:o.url})})),this.on("destroy",(()=>{document.body.removeChild(this.bar)})),this._configure()}}const w="announcekit-booster-modal",y=`\n  <div class="${w}-header">\n    <span class="${w}-label"></span>\n    <span class="${w}-title"></span>\n    <span class="${w}-close">&times;</span>\n  </div>\n  <div class="${w}-body"></div>\n  <div class="${w}-footer">\n    <a href="#" target="_blank" class="${w}-referer-link">${x="⚡️ by AnnounceKit","utf-8"==document.characterSet.toLowerCase()?x:x.replace("⚡️","Powered")}</a>\n  <div>\n`;var x;class k extends a{get type(){return"modal"}constructor(t){super(t),s(this,"modal",void 0),s(this,"label",void 0),s(this,"title",void 0),s(this,"body",void 0),s(this,"footer",void 0),s(this,"reflink",void 0),s(this,"cssid",void 0),s(this,"showdelaytimer",void 0),s(this,"hidedelaytimer",void 0),s(this,"_configure",(()=>{this.watchState((t=>{var e;let{disabled:i,color:s,backgroundColor:o,title:n,summary:r,url:a,labelName:l,fontSize:d,showLabel:h,labelColor:c,unread:p,showdelay:u,position:g,lastRead:m,visibleAt:f}=t;if(i||!n)return this._hide();if(!this.conf.landingMode&&new Date(f).getTime()<=Number(m)||!p)return this._hide();document.documentElement.style.setProperty("--announcekit-modal-font-multiplier",d),null!==(e=this.state.project)&&void 0!==e&&e.is_whitelabel&&(this.footer.style.display="none");let b={backgroundColor:`#${o}`,color:`#${s}`};l&&h?(this.label.innerText=this.state.locale.$label[l]||l,Object.assign(this.label.style,{backgroundColor:`#${c}20`,borderRadius:"3px",padding:"0.2em 0.5em",color:`#${c}`,textTransform:"uppercase",marginRight:"5px",fontSize:"0.65em",fontWeight:"500",visibility:""})):this.label.style.display="none",this.title.innerText=n,this.body.innerText=r,this.modal.href=a;const v={left:"0",right:"0",transform:""};switch(screen.width<700?"mobile":g){case"mobile":delete v.left,delete v.right;break;case"bottomcenter":v.left="50%",v.transform="translate(-50%)",delete v.right;break;case"bottomright":v.right="1em",v.left="auto";break;case"bottomleft":default:v.left="1em",delete v.right}Object.assign(this.modal.style,v,b),this.conf.landingMode||this.showdelaytimer||(this.state.preview?this._show():this.showdelaytimer=setTimeout(this._show,1e3*u))}),(t=>{var e,i,s,o,n,r,a,l,d,h,c,p,u,g,m,f,b;return{disabled:!!t.widget.options["booster-common-disabled"]||!!t.widget.options["booster-modal-disabled"],sticky:!t.widget.options["booster-modal-absolute"],bottom:!!t.widget.options["booster-modal-bottom"],showLabel:!t.widget.options["booster-modal-hide-label"],backgroundColor:String(t.widget.options["booster-modal-background-color"]||"ffffff"),color:String(t.widget.options["booster-modal-color"]||"323232"),fontSize:String(t.widget.options["booster-modal-font-size"]||"1"),showdelay:Number(t.widget.options["booster-modal-show-delay"]||1),hidedelay:Number(t.widget.options["booster-modal-hide-delay"]||15),position:t.widget.options["booster-modal-position"],title:null===(e=t.boosterPosts)||void 0===e||null===(i=e.modal)||void 0===i?void 0:i.title,url:null===(s=t.boosterPosts)||void 0===s||null===(o=s.modal)||void 0===o?void 0:o.url,summary:null===(n=t.boosterPosts)||void 0===n||null===(r=n.modal)||void 0===r?void 0:r.html_summary,labelName:null===(a=t.boosterPosts)||void 0===a||null===(l=a.modal)||void 0===l||null===(d=l.labels)||void 0===d||null===(h=d[0])||void 0===h?void 0:h.name,labelColor:null===(c=t.boosterPosts)||void 0===c||null===(p=c.modal)||void 0===p||null===(u=p.labels)||void 0===u||null===(g=u[0])||void 0===g?void 0:g.color,visibleAt:(null===(m=t.boosterPosts)||void 0===m||null===(f=m.modal)||void 0===f?void 0:f.visible_at)||0,unread:t.ui.unreadCount,lastRead:(null===(b=t.userData)||void 0===b?void 0:b.lastRead)||0}}))})),s(this,"hidetimer",null),s(this,"_show",(()=>{var t,e,i,s;this.hidetimer&&(clearTimeout(this.hidetimer),this.hidetimer=null),this.modal.classList.add(`${this.cssid}-inactive`),setTimeout((()=>{this.modal.classList.add(`${this.cssid}-active`),this.modal.classList.remove(`${this.cssid}-inactive`)}),50);const o=Number(this.state.widget.options["booster-modal-hide-delay"]||15);o>0&&!this.state.preview&&setTimeout(this._hide,1e3*o),this.parent.sendBeacon({event_type:"widget-booster-show",custom_1:"modal",post_id:Number(null===(t=this.post)||void 0===t?void 0:t.id)||void 0}),this.parent.trigger("booster-show",{boster:"modal",post_id:null===(e=this.post)||void 0===e?void 0:e.id,post_title:null===(i=this.post)||void 0===i?void 0:i.title,post_url:null===(s=this.post)||void 0===s?void 0:s.url})})),s(this,"show",this._show),s(this,"_hide",(()=>{this.hidetimer||(this.modal.classList.remove(`${this.cssid}-active`),this.modal.classList.add(`${this.cssid}-inactive`),this.hidetimer=setTimeout((()=>{this.modal.classList.remove(`${this.cssid}-inactive`),this.hidetimer=null}),500))})),s(this,"hide",this._hide),s(this,"_createCSS",(()=>{let t=Math.random().toString(36).substr(2,9).toLowerCase();this.state.preview&&(t="preview");let e=m(`\n      .${w}-${t} {\n        box-sizing: border-box;\n        display: none;\n        flex-direction: column;\n        box-shadow: 0 1px 7px 0 rgba(0,0,0,0.18);\n        z-index: 2147484000;\n        cursor: pointer;\n        position: fixed;\n        bottom: 1em;\n        left: 1em;\n        font-size: calc(var(--announcekit-modal-font-multiplier, 1) * 1em);\n        padding: 0.5em;\n        border-radius: 4px;\n        max-width: min(calc(100vw - 2em), 400px);\n        transition-property: opacity, transform;\n        transition-duration: .5s;\n        transition-timing-function: cubic-bezier(0, 1, 0.5, 1);\n        text-decoration: none;\n      }\n\n      .${w}-${t} .${w}-header {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        margin-bottom: 0.5em;\n      }\n\n      .${w}-${t} .${w}-close {\n        margin-left: auto;\n        padding: 5px 10px 5px 5px;\n        opacity: 0;\n        transition: .2s linear opacity;\n      }\n\n      .${w}-${t} .${w}-title {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      .${w}-${t}:hover .${w}-close {\n        opacity: 1;\n      }\n\n      .${w}-${t} .${w}-footer {\n        display: flex;\n        flex-direction: row;\n        justify-content: flex-end;\n        margin-top: 0.5em;\n        text-decoration: none;\n        font-size: 0.5em;\n      }\n\n      .${w}-${t} .${w}-referer-link {\n        text-decoration: none;\n        color: inherit;\n      }\n\n      .${w}-${t} .${w}-body {\n        line-height: 1.5em;\n        font-size: 0.8em;\n      }\n\n      .${w}-${t}-inactive {\n        display: flex;\n        transform: translateY(100%);\n        opacity: 0;\n      }\n\n      .${w}-${t}-active {\n        display: flex;\n        transform: translateY(0);\n        opacity: 1;\n      }\n    `);return this.on("destroy",(()=>{var t;null===(t=e.parentElement)||void 0===t||t.removeChild(e)})),`${w}-${t}`})),this.cssid=this._createCSS(),this.modal=document.createElement("a"),this.modal.className=`${this.cssid} ${w}`,this.modal.target="_blank",this.modal.href=t.state.feed.url,this.modal.innerHTML=y,this.label=this.modal.querySelector(`.${w}-label`),this.title=this.modal.querySelector(`.${w}-title`),this.body=this.modal.querySelector(`.${w}-body`),this.footer=this.modal.querySelector(`.${w}-footer`),this.reflink=this.modal.querySelector(`.${w}-referer-link`),document.body.appendChild(this.modal),this.modal.addEventListener("click",(t=>{var e,i,s,o,n;if(t.target.classList.contains(`${w}-close`))return t.preventDefault(),t.stopImmediatePropagation(),void(this.state.preview||(this._hide(),this.conf.landingMode||null===(n=this.parent)||void 0===n||n.setRead()));let r=this.state.widget.options["booster-modal-action"];var a,l,d;"widget"==r||"widget-single-post"==r?(t.preventDefault(),null===(a=this.parent)||void 0===a||a.open(),null===(l=this.parent)||void 0===l||l.showPost(this.post.id,{singular:"widget-single-post"==r})):this.conf.landingMode||null===(d=this.parent)||void 0===d||d.setRead(),this.parent.sendBeacon({event_type:"widget-booster-click",custom_1:"modal",post_id:Number(null===(e=this.post)||void 0===e?void 0:e.id)||void 0}),this.parent.trigger("booster-click",{boster:"modal",post_id:null===(i=this.post)||void 0===i?void 0:i.id,post_title:null===(s=this.post)||void 0===s?void 0:s.title,post_url:null===(o=this.post)||void 0===o?void 0:o.url})})),this.on("destroy",(()=>{document.body.removeChild(this.modal)})),this._configure()}}const $="L2R_STATE",S="L2R_READY",_="L2R_RESIZE",O="R2L_PUT_CSS",C="R2L_SET_THEME";function E(){let t=function(){let t,e,i=navigator.userAgent;for(let e=0;e<L.length;e++)if(L[e][1].test(i)){t=L[e][0];break}for(let t=0;t<T.length;t++)if(T[t][1].test(i)){e=T[t][0];break}return{agent:t,os:e}}();return{$url:window.location.href,$os:t.os,$agent:t.agent}}const L=[["AOL",/AOLShield\/([0-9\._]+)/],["Edge",/Edge\/([0-9\._]+)/],["Yandex",/YaBrowser\/([0-9\._]+)/],["Vivaldi",/Vivaldi\/([0-9\.]+)/],["Kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["Samsung",/SamsungBrowser\/([0-9\.]+)/],["Silk",/\bSilk\/([0-9._-]+)\b/],["MIUI",/MiuiBrowser\/([0-9\.]+)$/],["Beaker",/BeakerBrowser\/([0-9\.]+)/],["Chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["Firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["Opera Mini",/Opera Mini.*Version\/([0-9\.]+)/],["Opera",/Opera\/([0-9\.]+)(?:\s|$)/],["Opera",/OPR\/([0-9\.]+)(:?\s|$)/],["IE",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["IE",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["IE",/MSIE\s(7\.0)/],["Android",/Android\s([0-9\.]+)/],["Mobile Safari",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["Safari",/Version\/([0-9\._]+).*Safari/],["Facebook",/FBAV\/([0-9\.]+)/],["Instagram",/Instagram\s([0-9\.]+)/],["iOS WebView",/AppleWebKit\/([0-9\.]+).*Mobile/],["iOS WebView",/AppleWebKit\/([0-9\.]+).*Gecko\)$/]],T=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/]];function P(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function j(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?P(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}const A=!!navigator.userAgent&&/iPhone|iPod|Android/.test(navigator.userAgent);class M extends n{constructor(t){let{widget:e,data:i,user:o,lang:n,labels:r,name:a,user_token:l,options:d}=t;super(),s(this,"wrapper",void 0),s(this,"frame",void 0),s(this,"src",void 0),s(this,"data",void 0),s(this,"options",void 0),s(this,"state",void 0),s(this,"destroyed",void 0),s(this,"ready",void 0),s(this,"id",void 0),s(this,"size",{width:0,height:0}),this.id=a?`ank_widget_${a}`:`ank_widget_${Math.random().toString(36).substr(2,9)}`,this.data={user:o??null,data:i??null,labels:r??null,user_token:l??null,session:E(),mobile:!!A},this.options=d??{lightweight:!0},n&&(this.data.locale="auto"==n?navigator.language.slice(0,2).toLowerCase():n),this.src=new URL(e),this.src.pathname+="/view",this.state={},this.createFrame(),window.addEventListener("message",(t=>{this.destroyed||t.origin==this.src.origin&&t.source===this.frame.contentWindow&&t.data.event&&this.trigger(t.data.event,t.data)})),this.on(_,(t=>{let{payload:e}=t;this.size.width==e.width&&this.size.height==e.height||(this.size=e,this.trigger("resize",this.size))})),this.on("L2R_LOAD",(t=>{var e,i;if(this.state=t.payload,null!==(e=this.state.ui)&&void 0!==e&&e.backgroundColor&&(this.frame.style.backgroundColor=null===(i=this.state.ui)||void 0===i?void 0:i.backgroundColor),this.state.userData&&"ignore"==this.state.userData.$source)this.postMessage({event:"USERDATA",payload:{$source:"localstorage"}});else{let t=`{announcekit}:${this.state.project.id}`,e=localStorage.getItem(t),i=!0;if(e)try{this.postMessage({event:"USERDATA",payload:j(j({},JSON.parse(e)),{},{$source:"localstorage"})}),i=!1}catch(t){}i&&this.postMessage({event:"USERDATA",payload:{$source:"localstorage"}})}this.postMessage({event:"BOOTSTRAP"})})),this.on("L2R_PATCH_STATE",(t=>{this.trigger($,{payload:j(j({},this.state),t.payload)})})),this.on($,(t=>{this.state=t.payload;let e=`{announcekit}:${this.state.project.id}`;this.state.userData&&"localstorage"==this.state.userData.$source&&localStorage.setItem(e,JSON.stringify(this.state.userData||{})),this.trigger("state",t.payload)})),this.on("L2R_REQUEST",(t=>{this.trigger("request",t.payload)})),this.on(S,(()=>{this.ready=!0}))}init(){this.postMessage({event:"R2L_INIT",payload:{params:this.data}})}css(t){Object.assign(this.wrapper.style,t)}postMessage(t){this.destroyed||this.frame.contentWindow.postMessage(t,this.src.origin)}insert(t){if(!t)return;t.appendChild(this.wrapper);let e=document.createElement("form");e.style.display="none",e.setAttribute("action",String(this.src)),e.setAttribute("method","POST"),e.setAttribute("target",this.id);let i=document.createElement("input");i.type="hidden",i.name="json-body",i.value=JSON.stringify(j(j({},this.data),{},{options:this.options})),e.appendChild(i),document.body.appendChild(e),document.querySelector('iframe[name="'+this.id+'"]')&&e.submit(),document.body.removeChild(e)}createFrame(){let t=document.createElement("div");t.innerHTML=`<iframe name="${this.id}" allowfullscreen="true" data-announcekit-widget sandbox="allow-same-origin allow-presentation allow-scripts allow-top-navigation allow-popups allow-popups-to-escape-sandbox allow-forms allow-downloads"></iframe>`,t.className="announcekit-frame-wrapper";let e=t.firstChild;this.wrapper=t,this.frame=e,this.resetStyle(),t.addEventListener("click",(t=>{t.stopImmediatePropagation()})),document.addEventListener("click",(t=>{this.trigger("$clickoutside")})),document.addEventListener("touchstart",(t=>{this.trigger("$clickoutside")}))}resetStyle(){this.frame.setAttribute("style",""),this.wrapper.setAttribute("style",""),Object.assign(this.frame.style,{position:"absolute",top:0,right:0,bottom:0,left:0,border:0,width:"100%",height:"100%"}),Object.assign(this.wrapper.style,{position:"absolute",width:0,height:0,overflow:"hidden",top:"-1000em"})}destroy(){this.destroyed||(this.wrapper.parentElement&&this.wrapper.parentElement.removeChild(this.wrapper),this.destroyed=!0)}}class R extends a{get type(){return"overlay"}constructor(t){super(t),s(this,"boosterFrame",void 0),s(this,"backdrop",void 0),s(this,"hidden",void 0),s(this,"_fixFrameHeight",(()=>{if(this.frame.data.mobile)return this.boosterFrame.css({height:"100vh"});let t="0";this.boosterFrame.size&&this.boosterFrame.size.height&&(t=`${this.boosterFrame.size.height}px`),this.boosterFrame.css({height:t})})),s(this,"_hide",(()=>{this.backdrop&&Object.assign(this.backdrop.style,{opacity:0,pointerEvents:"none"}),this.boosterFrame&&this.boosterFrame.css({opacity:0,pointerEvents:"none"}),this.hidden=!0})),s(this,"hide",(()=>{var t,e,i;this._hide();let s=null===(t=this.boosterFrame)||void 0===t||null===(e=t.state)||void 0===e||null===(i=e.posts)||void 0===i?void 0:i[0];s&&this.parent.setRead(new Date(s.visible_at).getTime()),setTimeout((()=>{this.destroy()}),200)})),s(this,"_configure",(()=>{this.watchState((t=>{let{disabled:e,preview:i,size:s,width:o,unread:n,lastRead:r}=t;if(e)return this._hide();if(!i&&(!n||r>=new Date(this.post.visible_at).getTime()))return this._hide();this.boosterFrame||(this.boosterFrame=new M({widget:this.post.$url,data:this.frame.data.data,user:this.frame.data.user,user_token:this.frame.data.user_token,lang:this.frame.data.locale}),this.boosterFrame.insert(document.body),this.boosterFrame.one("BOOTSTRAP",(t=>{this.boosterFrame.init(),this.boosterFrame.postMessage({event:"OPEN"})})),this.boosterFrame.on("resize",this._fixFrameHeight),this.boosterFrame.on("request",(t=>{"close"==t&&this.hide()})),i||this.boosterFrame.on("$clickoutside",this.hide),this.boosterFrame.css({position:"fixed",opacity:0,zIndex:2147483001,height:"0",transition:"opacity 0.25s ease-in",pointerEvents:"none",borderRadius:"4px"}));let a=`${o}px`;"default"==s?a="70vw":"narrow"==s?a="50vw":"wide"==s&&(a="90vw"),this.boosterFrame.css({width:a});let l=()=>{this.hidden||(this.frame.data.mobile?this.boosterFrame.css({left:0,right:0,top:0,bottom:0,width:"100vw",maxHeight:"100vh",borderRadius:0,boxShadow:"none",transform:"none"}):this.boosterFrame.css({left:"50%",right:0,top:"50%",bottom:0,maxHeight:"90vh",boxShadow:"0 2px 13px 0 rgba(0,0,0,0.19)",transform:"translateY(-50%) translateX(-50%)"}),this.boosterFrame.css({opacity:1,pointerEvents:"auto"}),this._fixFrameHeight(),this.backdrop||(this.backdrop=document.createElement("div"),this.backdrop.classList.add("announcekit-widget-iframe-backdrop"),Object.assign(this.backdrop.style,{position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(0,0,0,.3)",zIndex:998,opacity:0,transition:"opacity 0.7s ease"}),setTimeout((()=>Object.assign(this.backdrop.style,{opacity:1})),10),document.body.appendChild(this.backdrop)))};this.hidden=!1,this.boosterFrame.ready?l():this.boosterFrame.one(S,l)}),(t=>{var e;return{preview:t.preview,disabled:!!t.widget.options["booster-common-disabled"]||!!t.widget.options["booster-overlay-disabled"],width:t.widget.options["booster-overlay-width"]||800,size:t.widget.options["booster-overlay-size"]||"default",unread:t.ui.unreadCount,lastRead:(null===(e=t.userData)||void 0===e?void 0:e.lastRead)||0}})),this.watchState((t=>{let{css:e,theme:i}=t;if(e)for(const t of Object.keys(e)){var s;null===(s=this.boosterFrame)||void 0===s||s.postMessage({event:O,payload:{css:e[t],id:t}})}var o;i&&(null===(o=this.boosterFrame)||void 0===o||o.postMessage({event:C,payload:i}))}),(t=>{var e,i;return{preview:t.preview,css:null===(e=t.previewData)||void 0===e?void 0:e.css,theme:null===(i=t.previewData)||void 0===i?void 0:i.theme}}))})),this._configure()}destroy(){var t;if(null===(t=this.boosterFrame)||void 0===t||t.destroy(),this.boosterFrame=null,this.backdrop)try{document.body.removeChild(this.backdrop)}catch(t){}super.destroy()}}class z extends r{constructor(t){super(t),s(this,"boosters",[]),s(this,"onWidgetInit",(t=>{let{widget:e}=t;if(!1===e.conf.boosters)return;const i=e.state.boosterPosts??{},s=Object.keys(i);for(let t of s){if(!i[t])continue;if(e.state.widget.options[`booster-${t}-disabled`])return;if(this.boosters.find((e=>e.type==t)))return;let s;switch(t){case"bar":s=new v(e);break;case"modal":s=new k(e);break;case"overlay":s=new R(e)}s&&this.boosters.push(s)}})),this.parent.on("widget-init",this.onWidgetInit)}get bar(){return this.boosters.find((t=>t instanceof v))}get modal(){return this.boosters.find((t=>t instanceof k))}get overlay(){return this.boosters.find((t=>t instanceof R))}}class F extends r{constructor(t){super(t)}get state(){return this.parent.state}get frame(){return this.parent.frame}get conf(){return this.parent.conf}get container(){return null}set container(t){throw new Error("not implemented")}}class I extends F{get badgeConf(){return this.conf.badge||{}}constructor(t){super(t),s(this,"badge",void 0),s(this,"handleClick",(t=>{t.stopPropagation(),this.trigger("click",t)})),s(this,"handleInterest",(t=>{this.trigger("interest")})),s(this,"_configure",(()=>{this.watchState((t=>{let{color:e,textColor:i,passiveColor:s,unread:o,hideWhenRead:n,eyecatcher:r,minimalist:a,favicon:l}=t;if(this.badge.className=Array.from(this.badge.classList).filter((t=>!/^announcekit/.test(t))).concat(["announcekit-widget-badge"]).join(" "),this.badgeConf.staticValue){if(this.badge.innerHTML=W(`#${e}`,`#${i}`,this.badgeConf.staticValue,this.badge.style),this.badge.style.visibility="visible","pulse"==r)this.badge.classList.add(u(`#${e}`));else if("shake"==r){const t=a?.5:1;this.badge.classList.add(p(t))}}else if(o){if(this.badge.classList.remove("announcekit-widget-badge-hidden"),this.badge.style.visibility="visible",this.badge.innerHTML=W(`#${e}`,`#${i}`,a?"":String(Math.min(o||0,5)),this.badge.style),a&&this.badge.classList.add(g()),"pulse"==r)this.badge.classList.add(u(`#${e}`));else if("shake"==r){const t=a?.5:1;this.badge.classList.add(p(t))}l&&d({color:`#${e}`,counter:Math.min(o||0,5)})}else n?(this.badge.style.visibility="hidden",this.badge.classList.add("announcekit-widget-badge-hidden")):(this.badge.style.visibility="visible",this.badge.classList.remove("announcekit-widget-badge-hidden"),a&&this.badge.classList.add(g()),this.badge.innerHTML=W(`#${s}`,`#${i}`,"",this.badge.style)),l&&d({reset:!0})}),(t=>({color:String(t.widget.options["mode-badge-color"]||"ff3924"),textColor:String(t.widget.options["mode-badge-text-color"]||"ffffff"),passiveColor:String(t.widget.options["mode-badge-passive-color"]||"727272"),hideWhenRead:!!t.widget.options["mode-badge-hide-when-read"],eyecatcher:t.widget.options["mode-badge-eyecatcher"],unread:t.ui.unreadCount,minimalist:t.widget.options["mode-badge-minimalist"]||!1,favicon:t.widget.options["mode-badge-favicon"]||!1})))})),this.badge=document.createElement("a"),this.badge.className="announcekit-widget-badge",this.badge.target="_blank",this.badge.href=t.state.feed.url,Object.assign(this.badge.style,{display:"inline-flex",flex:"0 0",width:"1em",height:"1em",cursor:"pointer",padding:"0",position:"relative",verticalAlign:"middle",visibility:"hidden"},this.badgeConf.style),this.one("destroy",(()=>{this.container=null})),this._configure()}get container(){return this.badge.parentElement}set container(t){let e=this.container;e&&(e.removeEventListener("click",this.handleClick),e.removeEventListener("mouseenter",this.handleInterest),e.removeChild(this.badge),e["announcekit-position-override"]&&(e.style.position="")),t&&(t.appendChild(this.badge),t.addEventListener("click",this.handleClick),t.addEventListener("mouseenter",this.handleInterest),t.style.cursor="pointer",""==t.style.position&&(t.style.position="relative",t["announcekit-position-override"]=!0))}getBoundingClientRect(){return this.badge.getBoundingClientRect()}}function W(t,e,i,s){let o="";return s.width&&(o+=`width: ${s.width};`),s.height&&(o+=`height: ${s.height};`),`\n    <svg\n       viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"\n       height="${s.height||"1em"}" width="${s.width||"1em"}"\n       style="${o.trim()}">\n      <g text-anchor="middle" font-weight="bold" font-family='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;' text-rendering="geometricPrecision" font-size="60">\n        <circle r="50" cx="50" cy="50" fill="${t}"/>\n        <text x="50" y="70" textLength="70" fill="${e}">${i}</text>\n      </g>\n    </svg>\n  `}class D extends F{get drawerConf(){return this.conf.drawer||{}}constructor(t){super(t),s(this,"drawer",void 0),s(this,"counter",void 0),s(this,"label",void 0),s(this,"badge",void 0),s(this,"handleClick",(t=>{t.stopPropagation(),this.trigger("click",t)})),s(this,"handleInterest",(t=>{this.trigger("interest")})),s(this,"_configure",(()=>{this.watchState((t=>{let{text:e,textWeight:i,color:s,textColor:o,top:n,roundness:r,unread:a,hideWhenRead:l,open:d,textSize:h}=t;this.drawer.style.top=`${n}%`,this.drawer.style.backgroundColor=`#${s}`,this.drawer.style.color=`#${o}`,this.drawer.style.fontSize=`${h}px`,this.drawer.style.fontWeight=i,this.drawer.style.borderRadius=`${r}em ${r}em 0 0`,this.label.innerText=e,this.drawer.style.display=a||!l||d?"block":"none"}),(t=>({text:String(t.widget.options["mode-drawer-text"]||"UPDATES"),textSize:String(t.widget.options["mode-drawer-text-size"]||16),textWeight:String(t.widget.options["mode-drawer-text-weight"]||400),color:String(t.widget.options["mode-drawer-color"]||"4E00FF"),textColor:String(t.widget.options["mode-drawer-text-color"]||"FFFFFF"),top:String(t.widget.options["mode-drawer-top"]||50),roundness:String(t.widget.options["mode-drawer-roundness"]||.5),hideWhenRead:!!t.widget.options["mode-drawer-hide-when-read"],unread:t.ui.unreadCount,open:t.ui.open})))})),this.drawer=document.createElement("a"),this.drawer.target="_blank",this.drawer.href=t.state.feed.url,this.drawer.className="announcekit-widget-drawer-badge",Object.assign(this.drawer.style,{backgroundColor:"transparent",boxShadow:"0 1px 7px 0 rgba(0,0,0,0.18)",position:"fixed",top:"50%",right:"0",zIndex:"2147483000",display:"block",cursor:"pointer",transform:"rotate(-90deg) translateY(-100%) translateX(50%)",transformOrigin:"right top",padding:"0.5em 1em"},this.drawerConf.style),this.drawer.appendChild(this._createLabel()),this.drawer.appendChild(this._createCounter()),this.badge=new I(this.parent),this.badge.on("click",this.handleClick),this.badge.container=this.counter,this.drawer.addEventListener("click",this.handleClick),this.drawer.addEventListener("mouseenter",this.handleInterest),this.one("destroy",(()=>{var t;null===(t=this.badge)||void 0===t||t.destroy(),this.container=null})),this.container=document.body,this._configure()}get container(){return this.drawer.parentElement}set container(t){let e=this.container;e&&e.removeChild(this.drawer),t&&t.appendChild(this.drawer)}getBoundingClientRect(){return this.drawer.getBoundingClientRect()}_createCounter(){let t=document.createElement("span");return t.className="announcekit-badge-counter",Object.assign(t.style,{position:"absolute",top:"-5px",right:"-5px",fontSize:"22px",display:"flex"}),this.counter=t}_createLabel(){let t=document.createElement("span");return t.className="announcekit-drawer-label",Object.assign(t.style,{display:"inline-block"}),this.label=t}}const B={bubble:'<svg style="position: relative; top: 2px" width="26" height="28" xmlns="http://www.w3.org/2000/svg"><path d="M23 0H3a3 3 0 0 0-3 3v24.41l5.12-5.12a1.05 1.05 0 0 1 .71-.29H23a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3zm0 18.086c0 .499-.373.914-.875.914H6.515c-.723 0-2.095.151-2.606.66L3 20.606V3.903C3 3.404 3.407 3 3.91 3h18.18c.503 0 .91.404.91.903v14.183z" fill-rule="nonzero"/></svg>',megaphone:'<svg width="32" height="26" xmlns="http://www.w3.org/2000/svg"><path d="M14.46 22.989a3.305 3.305 0 0 1-.167-.668l9.165-1.608c.114 1.799-1.226 3.632-3.25 4.369-2.428.884-5.007-.056-5.749-2.093zM1.655 12.883c.684-.25 1.466.17 1.744.934l3.278 9.005c.278.764-.052 1.588-.736 1.837-.683.248-1.465-.17-1.743-.935L.92 14.72c-.278-.764.052-1.588.735-1.836zm6.182 9.268l-3.344-9.186-.02-.057L21.826 2.733l1.278 3.512-13.41 7.232a.375.375 0 0 0-.147.506.37.37 0 0 0 .499.158l13.318-7.183 4.327 11.89-19.834 3.36-.02-.057zM23.01.197c.683-.249 1.47.182 1.753.96l1.925 5.29 2.567 7.052 1.925 5.29c.283.778-.042 1.613-.726 1.862-.683.248-1.47-.182-1.753-.96l-.128-.353-6.161-16.926-.128-.353C22 1.281 22.326.446 23.01.197zm4.96 5.916c1.456-.334 3.024.594 3.607 2.196.584 1.603-.021 3.322-1.35 4.002L27.97 6.113z" fill-rule="evenodd"/></svg>',giftbox:'<svg width="28" height="28" xmlns="http://www.w3.org/2000/svg"><g stroke="#FFF" stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"><path d="M24.4 14v13H3.6V14M1 7.5h26V14H1zM14 27V7.5M14 7.5H8.15a3.25 3.25 0 1 1 0-6.5C12.7 1 14 7.5 14 7.5zM14 7.5h5.85a3.25 3.25 0 0 0 0-6.5C15.3 1 14 7.5 14 7.5z"/></g></svg>',rocket:'<svg style="position: relative; top: 1px" width="28" height="28" xmlns="http://www.w3.org/2000/svg"><path d="M5.838 16.657L0 17.49s.884-4.419 3.535-7.07c1.13-1.13 3.344-1.176 4.793-1.062a9.02 9.02 0 0 1 1.014-1.21C17.515-.025 28 0 28 0s.025 10.485-8.15 18.658a9.02 9.02 0 0 1-1.209 1.014c.114 1.45.068 3.664-1.063 4.793C14.928 27.116 10.51 28 10.51 28l.834-5.838H9.342l-3.504-3.504v-2.001zm10.51-7.34a2.335 2.335 0 1 0 4.67.001 2.335 2.335 0 0 0-4.67-.001zM7.639 22.559l.535.533a2.653 2.653 0 0 1-.686 1.212c-1.616 1.616-5.137 1.342-5.137 1.342s-.254-3.543 1.341-5.138a2.653 2.653 0 0 1 1.212-.685l.534.534c-.075.054-.16.085-.228.152-1.14 1.139-.57 2.847-.57 2.847s1.709.569 2.847-.57c.068-.066.1-.153.152-.227z" fill-rule="evenodd"/></svg>',warning:'<svg width="34" height="33" xmlns="http://www.w3.org/2000/svg"><path d="M34 16.5l-3.77 4.385.525 5.813-5.58 1.286L22.255 33 17 30.697 11.745 33l-2.92-5.016-5.58-1.286.526-5.813L0 16.5l3.77-4.385-.525-5.813 5.58-1.286L11.745 0 17 2.303 22.255 0l2.92 5.016 5.58 1.286-.526 5.813L34 16.5zm-3.09 0l-3.086-3.563.43-4.723-4.565-1.045-2.39-4.075L17 4.965l-4.3-1.871-2.389 4.075-4.565 1.045.43 4.723L3.091 16.5l3.085 3.563-.43 4.723 4.565 1.045 2.39 4.075L17 28.035l4.3 1.871 2.389-4.075 4.565-1.045-.43-4.723 3.085-3.563zm-12.475 5.965H16V20h2.435v2.465zm0-5.07H16V10h2.435v7.394z" fill-rule="nonzero"/></svg>',bell:'<svg style="position: relative; left: 2px" width="25" height="28" xmlns="http://www.w3.org/2000/svg"><path d="M21.97 14.648c-1.864-.91-2.31-2.575-3.004-4.455-1.46-4.023-4.773-8.207-9.46-8.267C8.602-.743 4.6.33 5.06 3.118c-3.94 2.37-4.717 7.65-3.97 11.865.316 1.888.786 3.64-.374 5.36C-.64 22.397.07 25.4 2.026 24.876l21.076-5.647c1.868-.5 1.07-3.48-1.132-4.581zm-6.29 8.542l-5.157 1.382c-.534.143-.707.565-.477 1.067 1.431 3.561 7.034 2.06 6.469-1.827-.005-.375-.39-.741-.834-.622z" fill-rule="evenodd"/></svg>'};class N extends F{get floatConf(){return this.conf.float||{}}constructor(t){super(t),s(this,"float",void 0),s(this,"icon",void 0),s(this,"customIcon",void 0),s(this,"counter",void 0),s(this,"badge",void 0),s(this,"handleClick",(t=>{t.stopPropagation(),this.trigger("click",t)})),s(this,"handleInterest",(t=>{this.trigger("interest")})),s(this,"_configure",(()=>{this.watchState((t=>{let{unread:e,hideWhenRead:i,position:s,icon:o,customIcon:n,iconColor:r,color:a,open:l}=t;this.float.style.backgroundColor=`#${a}`,"custom"===o&&""!==n.trim()?(this.icon.innerHTML=`<img src="${n}" alt="Float Icon"/>`,this.icon.querySelector("img").style.width="100%"):(this.icon.innerHTML=B[o]||B.bell,this.icon.querySelector("svg").style.fill=`#${r}`),"bottomleft"==s?(this.float.style.left="20px",this.float.style.right="auto"):(this.float.style.right="20px",this.float.style.left="auto"),this.float.style.display=e||!i||l?"block":"none"}),(t=>({color:String(t.widget.options["mode-float-color"]||"4E00FF"),icon:String(t.widget.options["mode-float-icon"]||"bell"),customIcon:String(t.widget.options["mode-float-custom-icon-url"]||""),iconColor:String(t.widget.options["mode-float-icon-color"]||"FFFFFF"),position:String(t.widget.options["mode-float-position"]||"bottomright"),hideWhenRead:!!t.widget.options["mode-float-hide-when-read"],unread:t.ui.unreadCount,open:t.ui.open})))})),this.float=document.createElement("a"),this.float.target="_blank",this.float.href=t.state.feed.url,this.float.className="announcekit-widget-floating-badge",Object.assign(this.float.style,{backgroundColor:"transparent",boxShadow:"0 1px 7px 0 rgba(0,0,0,0.18)",position:"fixed",bottom:"20px",left:"-10000px",zIndex:"2147483000",display:"block",width:"58px",height:"58px",borderRadius:"24px",cursor:"pointer"},this.floatConf.style),this.float.appendChild(this._createIcon()),this.float.appendChild(this._createCounter()),this.badge=new I(this.parent),this.badge.on("click",this.handleClick),this.badge.container=this.counter,this.float.addEventListener("click",this.handleClick),this.float.addEventListener("mouseenter",this.handleInterest),this.one("destroy",(()=>{var t;null===(t=this.badge)||void 0===t||t.destroy(),this.container=null})),this.container=document.body,this._configure()}get container(){return this.float.parentElement}set container(t){let e=this.container;e&&e.removeChild(this.float),t&&t.appendChild(this.float)}getBoundingClientRect(){return this.float.getBoundingClientRect()}_createIcon(){let t=document.createElement("span");return t.className="announcekit-badge-icon",Object.assign(t.style,{position:"absolute",top:"50%",left:"50%",display:"inline-block",transform:"translateX(-50%) translateY(-50%)"}),this.icon=t}_createCounter(){let t=document.createElement("span");return t.className="announcekit-badge-counter",Object.assign(t.style,{position:"absolute",top:"-5px",right:"-5px",fontSize:"22px",display:"flex"}),this.counter=t}}i(6699);class H extends F{get lineConf(){return this.parent.conf.line||{}}constructor(t){super(t),s(this,"line",void 0),s(this,"label",void 0),s(this,"title",void 0),s(this,"handleClick",(t=>{t.stopPropagation(),this.trigger("click",t)})),s(this,"_configure",(()=>{this.watchState((t=>{let{title:e,url:i,labelName:s,labelColor:o}=t;e?(this.line.style.visibility="visible",s?(this.label.innerText=this.state.locale.$label[s]||s,this.label.style.backgroundColor=`#${o}20`,this.label.style.color=`#${o}`):(this.label.innerText="",this.label.style.backgroundColor="transparent"),this.title.innerText=e,this.line.href=i):(this.line.style.visibility="hidden",this.title.innerHTML="",this.label.innerHTML="")}),(t=>{var e,i,s,o,n,r,a,l;return{title:null===(e=t.posts[0])||void 0===e?void 0:e.title,url:null===(i=t.posts[0])||void 0===i?void 0:i.url,labelName:null===(s=t.posts[0])||void 0===s||null===(o=s.labels)||void 0===o||null===(n=o[0])||void 0===n?void 0:n.name,labelColor:null===(r=t.posts[0])||void 0===r||null===(a=r.labels)||void 0===a||null===(l=a[0])||void 0===l?void 0:l.color}}))})),this.line=document.createElement("a"),this.line.className="announcekit-widget-line",this.line.target="_blank",this.line.href=t.state.feed.url;const e=["ar","he"].includes(this.state.project.locale);Object.assign(this.line.style,{display:"inline-flex",alignItems:"center",color:"inherit",direction:e?"rtl":"ltr",textDecoration:"none"},this.lineConf.style),this.line.appendChild(this._createLabel()),this.line.appendChild(this._createTitle()),this.line.addEventListener("click",this.handleClick),this.one("destroy",(()=>{this.container=null})),this._configure()}get container(){return this.line.parentElement}set container(t){let e=this.container;e&&e.removeChild(this.line),t&&t.appendChild(this.line)}getBoundingClientRect(){return this.line.getBoundingClientRect()}_createLabel(){return this.label=document.createElement("span"),this.label.className="announcekit-line-label",Object.assign(this.label.style,{backgroundColor:"transparent",borderRadius:"4px",padding:"0.2em 0.5em",color:"white",textTransform:"uppercase",marginRight:"5px",fontSize:"0.65em",fontWeight:"500"}),["ar","he"].includes(this.state.project.locale)&&(this.label.style.marginLeft="5px",this.label.style.marginRight="0px"),this.label}_createTitle(){return this.title=document.createElement("span"),this.title.className="announcekit-line-title",this.title.style.lineHeight="1em",this.title}}let q=!1;if("undefined"!=typeof window){const t={get passive(){q=!0}};window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}const V="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1);let U,X,Y=[],G=!1,K=-1;const J=t=>Y.some((e=>!(!e.options.allowTouchMove||!e.options.allowTouchMove(t)))),Q=t=>{const e=t||window.event;return!!J(e.target)||e.touches.length>1||(e.preventDefault&&e.preventDefault(),!1)};class Z extends r{get disablesBodyScroll(){return!1}get state(){return this.parent.state}get frame(){return this.parent.frame}constructor(t){super(t),s(this,"isOpen",!1),s(this,"isPreloaded",!1),this.one("destroy",(()=>{this.frame.resetStyle()}))}preload(){this.isPreloaded||(this.isPreloaded=!0,this.trigger("preload"))}open(){var t,e;null!=this&&this.disablesBodyScroll&&!1!==(null==this||null===(t=this.parent)||void 0===t||null===(e=t.conf)||void 0===e?void 0:e.disablesBodyScroll)&&((t,e)=>{if(V){if(!t)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(t&&!Y.some((e=>e.targetElement===t))){const i={targetElement:t,options:e||{}};Y=[...Y,i],t.ontouchstart=t=>{1===t.targetTouches.length&&(K=t.targetTouches[0].clientY)},t.ontouchmove=e=>{1===e.targetTouches.length&&((t,e)=>{const i=t.targetTouches[0].clientY-K;!J(t.target)&&(e&&0===e.scrollTop&&i>0||(t=>!!t&&t.scrollHeight-t.scrollTop<=t.clientHeight)(e)&&i<0?Q(t):t.stopPropagation())})(e,t)},G||(document.addEventListener("touchmove",Q,q?{passive:!1}:void 0),G=!0)}}else{(t=>{setTimeout((()=>{if(void 0===X){const e=!!t&&!0===t.reserveScrollBarGap,i=window.innerWidth-document.documentElement.clientWidth;e&&i>0&&(X=document.body.style.paddingRight,document.body.style.paddingRight=`${i}px`)}void 0===U&&(U=document.body.style.overflow,document.body.style.overflow="hidden")}))})(e);const i={targetElement:t,options:e||{}};Y=[...Y,i]}})(this.frame.wrapper,{reserveScrollBarGap:!0}),this.trigger("open")}close(){var t,e;this.trigger("close"),null!=this&&this.disablesBodyScroll&&!1!==(null==this||null===(t=this.parent)||void 0===t||null===(e=t.conf)||void 0===e?void 0:e.disablesBodyScroll)&&(t=>{if(V){if(!t)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");t.ontouchstart=null,t.ontouchmove=null,Y=Y.filter((e=>e.targetElement!==t)),G&&0===Y.length&&(document.removeEventListener("touchmove",Q,q?{passive:!1}:void 0),G=!1)}else Y=Y.filter((e=>e.targetElement!==t)),Y.length||setTimeout((()=>{void 0!==X&&(document.body.style.paddingRight=X,X=void 0),void 0!==U&&(document.body.style.overflow=U,U=void 0)}))})(this.frame.wrapper)}}class tt extends Z{constructor(t){super(t),s(this,"_configure",(()=>{this.watchState((()=>{this._reposition()}),(t=>({fullHeight:!!t.widget.options["widget-embed-full-height"]})))})),s(this,"_reposition",(()=>{this.handleResize(this.frame.size)})),s(this,"handleResize",(t=>{let e={position:"relative",top:0,left:0,width:"100%",opacity:1,height:"100%",minHeight:"250px"};this.state.widget.options["widget-embed-full-height"]&&(e.height=`${t.height}px`,delete e.minHeight),this.frame.css(e)})),this.frame.on("resize",this.handleResize),this.on("destroy",(()=>{this.frame.off("resize",this.handleResize)})),this._configure(),requestAnimationFrame((()=>this.open()))}open(){this._reposition(),super.open()}close(){}}class et extends Z{get disablesBodyScroll(){return!0}constructor(t){super(t),s(this,"element",void 0),s(this,"isOpen",void 0),s(this,"openAt",void 0),s(this,"backdrop",void 0),s(this,"handleClickOutside",(()=>{this.openAt&&this.openAt+500>Date.now()||this.close()})),s(this,"fixFrameHeight",(()=>{if(!this.isOpen)return;let t="900px";this.frame.size&&this.frame.size.height&&(t=`${this.frame.size.height}px`),this.frame.css({maxHeight:t})})),this.frame.css({position:"fixed",opacity:0,zIndex:2147483001,transform:"",height:"",width:"400px"}),this.frame.on("$clickoutside",this.handleClickOutside),this.frame.on("resize",this.fixFrameHeight),this.one("destroy",(()=>{if(this.frame.off("$clickoutside",this.handleClickOutside),this.backdrop)try{document.body.removeChild(this.backdrop)}catch(t){}}))}open(){this.isOpen||this.destroyed||(this.openAt=Date.now(),this.isOpen=!0,this.frame.css({opacity:1,transform:"translateY(-50%) translateX(-50%)",transition:"opacity 0.25s ease-in",left:"50%",right:0,top:"50%",bottom:0,maxWidth:"600px",maxHeight:"900px",width:"70vw",height:"80vh",pointerEvents:"auto",borderRadius:"4px",boxShadow:"0 2px 13px 0 rgba(0,0,0,0.19)"}),this.fixFrameHeight(),this.backdrop=document.createElement("div"),this.backdrop.classList.add("announcekit-widget-iframe-backdrop"),Object.assign(this.backdrop.style,{position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(0,0,0,.3)",zIndex:998,opacity:0,transition:"opacity 0.7s ease"}),setTimeout((()=>Object.assign(this.backdrop.style,{opacity:1})),10),document.body.appendChild(this.backdrop),super.open())}close(){!this.isOpen||this.destroyed||this.state.widget.persistent||(this.openAt=null,this.isOpen=!1,super.close(),Object.assign(this.backdrop.style,{opacity:0,pointerEvents:"none"}),this.frame.css({opacity:0,pointerEvents:"none"}),setTimeout((()=>{try{this.frame.css({opacity:0,transform:"",pointerEvents:"none",top:"-1000em",left:"",bottom:"",right:""}),document.body.removeChild(this.backdrop)}catch(t){}}),200))}}class it extends Z{constructor(t){super(t),s(this,"isOpen",void 0),s(this,"openAt",void 0),s(this,"capturedPosition",void 0),s(this,"repositionInterval",void 0),s(this,"handleClickOutside",(()=>{this.openAt&&this.openAt+500>Date.now()||this.close()})),s(this,"handleResize",(t=>{let{payload:e}=t;this.frame.css({height:`${Math.max(Math.min(e.height,350),100)}px`}),this.trigger("resize",{size:e})})),s(this,"_reposition",(()=>{let t={left:0,top:0,bottom:0,right:0,width:0,height:0},e=this.frame.wrapper.getBoundingClientRect();if(this.parent.launcher){if(t=this.parent.launcher.getBoundingClientRect(),!t||!t.width||!t.height)return}else this.capturedPosition?(t.left=t.right=this.capturedPosition.left,t.top=t.bottom=this.capturedPosition.top):(t.top=t.bottom=window.innerHeight/2-e.height/2,t.left=t.right=window.innerWidth/2-e.width/2);let i="left",s="top";t.left+e.width>window.innerWidth&&(i="right"),t.top+e.height+10>window.innerHeight&&t.top>window.innerHeight/2&&(s="bottom"),"bar"==this.state.widget.mode&&(i="center");let o={opacity:1,marginTop:0},n=window.pageYOffset||document.documentElement.scrollTop,r=window.pageXOffset||document.documentElement.scrollLeft;"left"==i?Object.assign(o,{left:`${Math.max(0,t.left+r)}px`}):"right"==i?Object.assign(o,{left:`${Math.max(0,t.left+r-e.width)}px`}):"center"==i&&Object.assign(o,{left:`${Math.max(0,t.left+r+(t.width-e.width)/2)}px`}),"top"==s?Object.assign(o,{top:`${t.bottom+n+10}px`}):Object.assign(o,{top:t.top+n-e.height-10+"px"}),this.frame.css(o)})),this.frame.css({opacity:0,transition:"margin-top 0.2s linear, opacity 0.2s linear",zIndex:16777270,marginTop:"-10px",borderRadius:"4px",boxShadow:"0 2px 13px 0 rgba(0,0,0,0.19)",width:"400px",height:"400px"}),this.frame.on(_,this.handleResize),this.frame.on("$clickoutside",this.handleClickOutside),this.one("destroy",(()=>{this.frame.off("$clickoutside",this.handleClickOutside),this.frame.off(_,this.handleResize),window.removeEventListener("scroll",this._reposition),window.removeEventListener("resize",this._reposition),clearInterval(this.repositionInterval)}))}open(){this.isOpen||this.destroyed||(this.openAt=Date.now(),this.isOpen=!0,window.addEventListener("scroll",this._reposition),window.addEventListener("resize",this._reposition),window.event&&window.event.clientX&&window.event.clientY&&(this.capturedPosition={left:window.event.clientX,top:window.event.clientY}),super.open(),this._reposition(),this.repositionInterval=setInterval(this._reposition,200))}close(){!this.isOpen||this.destroyed||this.state.widget.persistent||(this.isOpen=!1,this.openAt=null,this.capturedPosition=null,this.frame.css({opacity:0,marginTop:"-10px"}),setTimeout((()=>this.frame.css({top:"-1000em",left:"0"})),200),window.removeEventListener("scroll",this._reposition),window.removeEventListener("resize",this._reposition),clearInterval(this.repositionInterval),super.close())}}let st=screen.width<700;class ot extends Z{get disablesBodyScroll(){return!0}constructor(t){super(t),s(this,"element",void 0),s(this,"openAt",void 0),s(this,"backdrop",void 0),s(this,"handleClickOutside",(()=>{this.openAt&&this.openAt+500>Date.now()||this.close()})),s(this,"_configure",(()=>{this.watchState((()=>{this._reposition()}),(t=>({slideDirection:t.widget.options["widget-sidebar-slide-direction"],width:t.widget.options["widget-sidebar-width-preset"]})))})),s(this,"_reposition",(()=>{if(this.isOpen){const t={opacity:1,transform:"translateX(0px)",borderRadius:"4px",left:"",right:"10px",top:"10px",bottom:"10px",width:"400px",pointerEvents:"auto"};"narrow"==this.state.widget.options["widget-sidebar-width-preset"]?t.width="350px":"wide"==this.state.widget.options["widget-sidebar-width-preset"]&&(t.width="500px"),"left"==this.state.widget.options["widget-sidebar-slide-direction"]&&(t.right="",t.left="10px"),this.frame.css(t),st&&this.frame.css({left:0,right:0,top:0,bottom:0,width:"100vw",height:"100vh",borderRadius:0}),this.backdrop||(this.backdrop=document.createElement("div"),this.backdrop.classList.add("announcekit-widget-iframe-backdrop"),Object.assign(this.backdrop.style,{position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(0,0,0,.3)",zIndex:998,opacity:0,transition:"opacity 0.7s ease"}),document.body.appendChild(this.backdrop),requestAnimationFrame((()=>Object.assign(this.backdrop.style,{opacity:1}))))}else{let t="left"==this.state.widget.options["widget-sidebar-slide-direction"]?"-60px":"60px";if(this.frame.css({opacity:0,transform:`translateX(${t})`,pointerEvents:"none"}),this.backdrop){Object.assign(this.backdrop.style,{opacity:0,pointerEvents:"none"});let t=this.backdrop;setTimeout((()=>{try{this.frame.css({top:"-1000em",left:"",bottom:"",right:""}),document.body.removeChild(t)}catch(t){}}),300),this.backdrop=null}}})),this.frame.css({position:"fixed",opacity:0,transition:"opacity 0.25s ease-in, transform 0.2s ease-in",zIndex:2147483001,transform:"translateX(60px)",boxShadow:"0 2px 13px 0 rgba(0,0,0,0.19)",height:"",width:"400px"}),this.frame.on("$clickoutside",this.handleClickOutside),this.one("destroy",(()=>{if(this.frame.off("$clickoutside",this.handleClickOutside),this.backdrop)try{document.body.removeChild(this.backdrop)}catch(t){}})),this._configure()}open(){this.isOpen||this.destroyed||(this.openAt=Date.now(),this.isOpen=!0,this._reposition(),super.open())}close(){!this.isOpen||this.destroyed||this.state.widget.persistent||(this.openAt=null,this.isOpen=!1,this._reposition(),super.close())}}function nt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function rt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):nt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}class at extends r{get state(){return this.frame.state}constructor(t,e,i){super(t),s(this,"frame",void 0),s(this,"conf",void 0),s(this,"container",void 0),s(this,"widget",void 0),s(this,"launcher",void 0),s(this,"isOpen",!1),this.frame=e,this.conf=i,this.container=h(i.selector),this._watchLocalRequests(),this._watchGlobalWidgets(),this._watchUnread(),this._setupPreview(),this._createLauncher(),this._createWidget(),this._setupSegmentTracking(),this.frame.on("state",(t=>this.trigger("state",t))),this.frame.on("close",(()=>this.close())),this.frame.on("READY",(()=>this.trigger("ready"))),this.trigger("state",this.state),this.one("init",(()=>{this.conf.onInit&&requestAnimationFrame((()=>this.conf.onInit(this))),this.sendBeacon({event_type:"widget-load"})})),this.one("destroy",(()=>{var t,e;null===(t=this.widget)||void 0===t||t.destroy(),null===(e=this.launcher)||void 0===e||e.destroy(),this.frame.destroy()}))}_init(){this.frame.init(),this.trigger("init")}_createWidget(){this.watchState((t=>{this.widget&&(this.widget.destroy(),this.widget=null),requestAnimationFrame((()=>{if(!this.destroyed){if("embed"==t)this.widget=new tt(this);else switch(t){case"popup":this.widget=new it(this);break;case"sidebar":this.widget=new ot(this);break;case"feed":this.widget=new et(this)}this.widget&&(this.widget.on("open",(()=>{this.frame.postMessage({event:"OPEN"}),this.trigger("open"),this.isOpen=!0,this.sendBeacon({event_type:"widget-open"})})),this.widget.on("close",(()=>{this.frame.postMessage({event:"CLOSE"}),this.trigger("close"),this.isOpen=!1,this.sendBeacon({event_type:"widget-close"})})),this.widget.on("preload",(()=>{this.frame.postMessage({event:"LOAD"}),this.trigger("preload")})),this.widget.on("resize",(t=>{this.trigger("resize",t)}))),this.isOpen&&requestAnimationFrame((()=>this.open()))}}))}),(t=>t.widget.action))}_createLauncher(){this.watchState((t=>{this.launcher&&(this.launcher.destroy(),this.launcher=null),requestAnimationFrame((()=>{if(!this.destroyed){switch(this.container&&(this.container.setAttribute("data-announcekit-mode",t),"badge"==t?this.launcher=new I(this):"line"==t&&(this.launcher=new H(this)),this.launcher&&(this.launcher.container=this.container)),t){case"float":this.launcher=new N(this);break;case"drawer":this.launcher=new D(this)}this.launcher&&(this.launcher.on("click",(t=>{this.widget?(t.preventDefault(),this.isOpen?this.close():this.open()):this.setRead()})),this.launcher.on("interest",(t=>{this.widget&&this.widget.preload()})))}}))}),(t=>"embed"==t.widget.action?"embed":t.widget.mode))}_watchLocalRequests(){this.frame.on("request",(t=>{"close"==t&&this.close(),t&&"imgmodal"===t.type&&function(t){let{media:e,src:i,poster:s}=t;if(screen.width<700)return;const o=document.createElement("div");Object.assign(o.style,{display:"none",position:"fixed",zIndex:"1000000000000",left:"0",top:"0",width:"100%",height:"100%",overflow:"hidden",backgroundColor:"rgba(0, 0, 0, 0.9)",textAlign:"center",cursor:"pointer",animation:"fadein 0.2s"}),o.addEventListener("click",(function(t){t.stopPropagation(),t.preventDefault(),o.parentNode.removeChild(o)}));const n=document.createElement("div");if(Object.assign(n.style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),"video"==e){const t=document.createElement("video");t.setAttribute("poster",s),t.setAttribute("loop",""),t.setAttribute("muted","muted"),t.setAttribute("playsinline",""),t.setAttribute("autoplay",""),t.muted=!0,t.style.maxWidth="min(100%, 55vw)",t.style.display="inline-block";const e=document.createElement("source");e.setAttribute("type","video/mp4"),e.setAttribute("src",i),t.appendChild(e),n.appendChild(t)}else{const t=document.createElement("img");t.setAttribute("src",i),Object.assign(t.style,{maxWidth:"min(100%, 55vw)",display:"inline-block"}),n.appendChild(t)}o.appendChild(n),document.body.appendChild(o),o.style.display="table"}(t),t&&"trigger"===t.type&&this.trigger(t.name,t.data)}))}_watchGlobalWidgets(){const t=t=>{t.widget!=this&&this.close()};this.parent.on("widget-open",t),this.one("destroy",(()=>this.parent.off("widget-open",t)))}_watchUnread(){let t,e=!1;this.on("state",(i=>{i.ui.unreadCount!=t&&((e||i.ui.unreadCount)&&(e=!0,requestAnimationFrame((()=>this.trigger("unread",{widget:this,unread:this.state.ui.unreadCount})))),t=i.ui.unreadCount)}))}setRead(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.frame.postMessage({event:"UPDATE_LAST_READ",payload:{upto:t}})}showPost(t){let{singular:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t&&(this.open(),this.frame.postMessage({event:"R2L_SHOW_POST",payload:{id:t,singular:e}}))}subscribeToProject(t){if(t)return this.frame.postMessage({event:"R2L_SUBSCRIBE_EMAIL",payload:{email:t}}),new Promise(((t,e)=>{this.frame.one("L2R_SUBSCRIBE_EMAIL_RESULT",(i=>{const s=i.payload.error;if(s)return e(new Error(s));t(i.payload)}))}))}open(){var t;null===(t=this.widget)||void 0===t||t.open()}close(){var t;null===(t=this.widget)||void 0===t||t.close()}trigger(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super.trigger(t,e),this.parent.trigger(`widget-${t}`,rt(rt({},e),{},{widget:this}))}sendBeacon(t){var e;null===(e=this.frame)||void 0===e||e.postMessage({event:"R2L_BEACON",payload:t})}_setupPreview(){var t=this;this.state.preview&&(this.watchState((t=>{let{mode:e,action:i}=t;document.body.setAttribute("data-mode",e),document.body.setAttribute("data-action",i)}),(t=>({mode:t.widget.mode,action:t.widget.action}))),this.patchState=t=>this.frame.postMessage({event:"R2L_PATCH_STATE",payload:t}),this.putCSS=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.frame.postMessage({event:O,payload:{css:e,id:i}}),t.patchState({previewData:{css:{[i]:e}}})},this.setTheme=t=>{this.frame.postMessage({event:C,payload:t}),this.patchState({previewData:{theme:t}})},this.getCSSVars=(t,e)=>{this.frame.one("R2L_GET_CSS_VARS_RESULT",(t=>e(t.payload))),this.frame.postMessage({event:"L2R_GET_CSS_VARS",payload:{keys:t}})})}_setupSegmentTracking(){const t=this.state.segmentToken;if(!t)return;const e=this.state.userData;["post-view","post-linkclick","post-reaction","post-feedback","booster-click","booster-show"].forEach((i=>{return this.on(i,(s=i,function(i){const o={method:"track",event_name:s,event_properties:i};e&&(o.user={id:e.$id}),fetch(`/api/segment/${t}`,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}).catch((t=>console.log("segment error",t)))}));var s}))}}function lt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function dt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?lt(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):lt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var ht=0;class ct extends n{get version(){return 2}constructor(t){super(),s(this,"widgets",void 0),s(this,"boosters",new z(this)),s(this,"log",void 0),s(this,"loaded",void 0),this.widgets=[],this.log=[],t.queue&&t.queue.forEach&&t.queue.forEach((t=>{Array.isArray(t)?this.on(t[0],t[1]):this.push(t)})),this.loaded=!0,setTimeout((()=>{this.trigger("init",this)}),10),this.on("widget-destroy",(t=>{let{widget:e}=t;this.widgets=this.widgets.filter((t=>t.conf._id!==e.conf._id)),this.log=this.log.filter((t=>!t.push||t.push._id!==e.conf._id)),e.conf.name&&this[`widget$${e.conf.name}`]==e&&delete this[`widget$${e.conf.name}`]}))}push(t){this.log.push(t),function(t){return!!t.widget}(t)&&this._pushWidget(t)}debug(){return this.widgets.map((t=>{var e,i,s,o,n,r;const a=t.conf,l=t.frame.state;let d;return"string"==typeof a.selector?d=document.querySelector(a.selector):"object"==typeof a.selector&&(d=a.selector),{id:a.widget,projectId:l.project.id,conf:a,widgetType:l.widget.action,launcherType:l.widget.mode,isElementPlaced:null===(e=d)||void 0===e?void 0:e.isConnected,isDestroyed:t.destroyed,unreadCount:null===(i=l.ui)||void 0===i?void 0:i.unreadCount,totalPosts:l.posts.length,planHasUserTracking:l.project.plan_has_user_tracking,receivedUserId:null===(s=l.userData)||void 0===s?void 0:s.$id,segmentationEnabled:l.project.plan_has_segmentation&&pt(a),hasBarBooster:!(null===(o=l.boosterPosts)||void 0===o||!o.bar),hasModalBooster:!(null===(n=l.boosterPosts)||void 0===n||!n.modal),hasOverlayBooster:!(null===(r=l.boosterPosts)||void 0===r||!r.overlay)}}))}_pushWidget(t){t._id=ht++;for(let e=0;e<this.log.length;e++){let i=this.log[e];if(i.push&&o(dt(dt({},i.push),{},{_id:null}),dt(dt({},t),{},{_id:null})))return}const e=new M(t);let i;function s(t){return`${t.widget}|${t.selector}`}i=t.embed?h(t.selector):t.root?h(t.root):document.body,i?(this.log.push({push:t}),e.insert(i),e.one("BOOTSTRAP",(i=>{let o;for(let i=0;i<this.widgets.length;i++){let o=this.widgets[i];if(s(o.conf)===s(t)){if(!(o.conf._id<t._id))return e.destroy();o.destroy()}}o=new at(this,e,t),o&&(this.widgets.push(o),t.name&&(this[`widget$${t.name}`]=o),setTimeout((()=>{o._init()}),10))}))):setTimeout((()=>{this._pushWidget(t)}),1e3)}}function pt(t){return!!t.data}let ut;ut=window.announcekit?window.announcekit.loaded?window.announcekit:new ct(window.announcekit):new ct({});const gt=ut},1223:(t,e,i)=>{var s=i(5112)("unscopables"),o=i(30),n=i(5185),r=Array.prototype;null==r[s]&&n(r,s,o(null)),t.exports=function(t){r[s][t]=!0}},9670:(t,e,i)=>{var s=i(111);t.exports=function(t){if(!s(t))throw TypeError(String(t)+" is not an object");return t}},1318:(t,e,i)=>{var s=i(5656),o=i(7466),n=i(1400);t.exports=function(t){return function(e,i,r){var a,l=s(e),d=o(l.length),h=n(r,d);if(t&&i!=i){for(;d>h;)if((a=l[h++])!=a)return!0}else for(;d>h;h++)if((t||h in l)&&l[h]===i)return t||h||0;return!t&&-1}}},4326:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},9920:(t,e,i)=>{var s=i(6656),o=i(3887),n=i(1236),r=i(3070);t.exports=function(t,e){for(var i=o(e),a=r.f,l=n.f,d=0;d<i.length;d++){var h=i[d];s(t,h)||a(t,h,l(e,h))}}},9114:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},9781:(t,e,i)=>{t.exports=!i(7293)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},317:(t,e,i)=>{var s=i(111),o=i(7854).document,n=s(o)&&s(o.createElement);t.exports=function(t){return n?o.createElement(t):{}}},748:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(t,e,i)=>{var s=i(7854),o=i(1236).f,n=i(5185),r=i(1320),a=i(3505),l=i(9920),d=i(4705);t.exports=function(t,e){var i,h,c,p,u,g=t.target,m=t.global,f=t.stat;if(i=m?s:f?s[g]||a(g,{}):(s[g]||{}).prototype)for(h in e){if(p=e[h],c=t.noTargetGet?(u=o(i,h))&&u.value:i[h],!d(m?h:g+(f?".":"#")+h,t.forced)&&void 0!==c){if(typeof p==typeof c)continue;l(p,c)}(t.sham||c&&c.sham)&&n(p,"sham",!0),r(i,h,p,t)}}},7293:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},2521:(t,e,i)=>{t.exports=i(2309)("native-function-to-string",Function.toString)},7854:t=>{t.exports="object"==typeof window&&window&&window.Math==Math?window:"object"==typeof self&&self&&self.Math==Math?self:Function("return this")()},6656:t=>{var e={}.hasOwnProperty;t.exports=function(t,i){return e.call(t,i)}},3501:t=>{t.exports={}},5185:(t,e,i)=>{var s=i(3070),o=i(9114);t.exports=i(9781)?function(t,e,i){return s.f(t,e,o(1,i))}:function(t,e,i){return t[e]=i,t}},490:(t,e,i)=>{var s=i(7854).document;t.exports=s&&s.documentElement},4664:(t,e,i)=>{t.exports=!i(9781)&&!i(7293)((function(){return 7!=Object.defineProperty(i(317)("div"),"a",{get:function(){return 7}}).a}))},8361:(t,e,i)=>{var s=i(7293),o=i(4326),n="".split;t.exports=s((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?n.call(t,""):Object(t)}:Object},9909:(t,e,i)=>{var s,o,n,r=i(8536),a=i(111),l=i(5185),d=i(6656),h=i(6200),c=i(3501),p=i(7854).WeakMap;if(r){var u=new p,g=u.get,m=u.has,f=u.set;s=function(t,e){return f.call(u,t,e),e},o=function(t){return g.call(u,t)||{}},n=function(t){return m.call(u,t)}}else{var b=h("state");c[b]=!0,s=function(t,e){return l(t,b,e),e},o=function(t){return d(t,b)?t[b]:{}},n=function(t){return d(t,b)}}t.exports={set:s,get:o,has:n,enforce:function(t){return n(t)?o(t):s(t,{})},getterFor:function(t){return function(e){var i;if(!a(e)||(i=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}}},4705:(t,e,i)=>{var s=i(7293),o=/#|\.prototype\./,n=function(t,e){var i=a[r(t)];return i==d||i!=l&&("function"==typeof e?s(e):!!e)},r=n.normalize=function(t){return String(t).replace(o,".").toLowerCase()},a=n.data={},l=n.NATIVE="N",d=n.POLYFILL="P";t.exports=n},111:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},1913:t=>{t.exports=!1},133:(t,e,i)=>{t.exports=!i(7293)((function(){String(Symbol())}))},8536:(t,e,i)=>{var s=i(2521),o=i(7854).WeakMap;t.exports="function"==typeof o&&/native code/.test(s.call(o))},30:(t,e,i)=>{var s=i(9670),o=i(6048),n=i(748),r=i(490),a=i(317),l=i(6200)("IE_PROTO"),d=function(){},h=function(){var t,e=a("iframe"),i=n.length;for(e.style.display="none",r.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;i--;)delete h.prototype[n[i]];return h()};t.exports=Object.create||function(t,e){var i;return null!==t?(d.prototype=s(t),i=new d,d.prototype=null,i[l]=t):i=h(),void 0===e?i:o(i,e)},i(3501)[l]=!0},6048:(t,e,i)=>{var s=i(9781),o=i(3070),n=i(9670),r=i(1956);t.exports=s?Object.defineProperties:function(t,e){n(t);for(var i,s=r(e),a=s.length,l=0;a>l;)o.f(t,i=s[l++],e[i]);return t}},3070:(t,e,i)=>{var s=i(9781),o=i(4664),n=i(9670),r=i(7593),a=Object.defineProperty;e.f=s?a:function(t,e,i){if(n(t),e=r(e,!0),n(i),o)try{return a(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},1236:(t,e,i)=>{var s=i(9781),o=i(5296),n=i(9114),r=i(5656),a=i(7593),l=i(6656),d=i(4664),h=Object.getOwnPropertyDescriptor;e.f=s?h:function(t,e){if(t=r(t),e=a(e,!0),d)try{return h(t,e)}catch(t){}if(l(t,e))return n(!o.f.call(t,e),t[e])}},8006:(t,e,i)=>{var s=i(6324),o=i(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return s(t,o)}},5181:(t,e)=>{e.f=Object.getOwnPropertySymbols},6324:(t,e,i)=>{var s=i(6656),o=i(5656),n=i(1318)(!1),r=i(3501);t.exports=function(t,e){var i,a=o(t),l=0,d=[];for(i in a)!s(r,i)&&s(a,i)&&d.push(i);for(;e.length>l;)s(a,i=e[l++])&&(~n(d,i)||d.push(i));return d}},1956:(t,e,i)=>{var s=i(6324),o=i(748);t.exports=Object.keys||function(t){return s(t,o)}},5296:(t,e)=>{"use strict";var i={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,o=s&&!i.call({1:2},1);e.f=o?function(t){var e=s(this,t);return!!e&&e.enumerable}:i},3887:(t,e,i)=>{var s=i(8006),o=i(5181),n=i(9670),r=i(7854).Reflect;t.exports=r&&r.ownKeys||function(t){var e=s.f(n(t)),i=o.f;return i?e.concat(i(t)):e}},1320:(t,e,i)=>{var s=i(7854),o=i(5185),n=i(6656),r=i(3505),a=i(2521),l=i(9909),d=l.get,h=l.enforce,c=String(a).split("toString");i(2309)("inspectSource",(function(t){return a.call(t)})),(t.exports=function(t,e,i,a){var l=!!a&&!!a.unsafe,d=!!a&&!!a.enumerable,p=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof e||n(i,"name")||o(i,"name",e),h(i).source=c.join("string"==typeof e?e:"")),t!==s?(l?!p&&t[e]&&(d=!0):delete t[e],d?t[e]=i:o(t,e,i)):d?t[e]=i:r(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&d(this).source||a.call(this)}))},4488:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},3505:(t,e,i)=>{var s=i(7854),o=i(5185);t.exports=function(t,e){try{o(s,t,e)}catch(i){s[t]=e}return e}},6200:(t,e,i)=>{var s=i(2309)("keys"),o=i(9711);t.exports=function(t){return s[t]||(s[t]=o(t))}},2309:(t,e,i)=>{var s=i(7854),o=i(3505),n="__core-js_shared__",r=s[n]||o(n,{});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.0.0",mode:i(1913)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},1400:(t,e,i)=>{var s=i(9958),o=Math.max,n=Math.min;t.exports=function(t,e){var i=s(t);return i<0?o(i+e,0):n(i,e)}},5656:(t,e,i)=>{var s=i(8361),o=i(4488);t.exports=function(t){return s(o(t))}},9958:t=>{var e=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:e)(t)}},7466:(t,e,i)=>{var s=i(9958),o=Math.min;t.exports=function(t){return t>0?o(s(t),9007199254740991):0}},7593:(t,e,i)=>{var s=i(111);t.exports=function(t,e){if(!s(t))return t;var i,o;if(e&&"function"==typeof(i=t.toString)&&!s(o=i.call(t)))return o;if("function"==typeof(i=t.valueOf)&&!s(o=i.call(t)))return o;if(!e&&"function"==typeof(i=t.toString)&&!s(o=i.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},9711:t=>{var e=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+i).toString(36))}},5112:(t,e,i)=>{var s=i(2309)("wks"),o=i(9711),n=i(7854).Symbol,r=i(133);t.exports=function(t){return s[t]||(s[t]=r&&n[t]||(r?n:o)("Symbol."+t))}},6699:(t,e,i)=>{"use strict";var s=i(1318)(!0);i(2109)({target:"Array",proto:!0},{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i(1223)("includes")},6774:t=>{t.exports=function(t,e,i,s){var o=i?i.call(s,t,e):void 0;if(void 0!==o)return!!o;if(t===e)return!0;if("object"!=typeof t||!t||"object"!=typeof e||!e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(e),l=0;l<n.length;l++){var d=n[l];if(!a(d))return!1;var h=t[d],c=e[d];if(!1===(o=i?i.call(s,h,c,d):void 0)||void 0===o&&h!==c)return!1}return!0}}},e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={exports:{}};return t[s](o,o.exports,i),o.exports}return i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i(4514)})().default;